<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recuiva Backend API - Demo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --primary-color: #FF6600;
            --secondary-color: #004EAA;
            --accent-color: #A5CDED;
        }
        .gradient-bg {
            background: linear-gradient(135deg, var(--secondary-color), var(--accent-color));
        }
    </style>
</head>
<body class="bg-gray-50">
    <div class="min-h-screen">
        <!-- Header -->
        <header class="gradient-bg text-white py-12">
            <div class="container mx-auto px-4">
                <h1 class="text-4xl font-bold mb-2">üß† Recuiva Backend API</h1>
                <p class="text-xl opacity-90">Sistema de Active Recall con Validaci√≥n Sem√°ntica mediante IA</p>
                <div class="mt-4 flex gap-4">
                    <span class="bg-white/20 px-4 py-2 rounded-full text-sm">FastAPI v0.118</span>
                    <span class="bg-white/20 px-4 py-2 rounded-full text-sm">Sentence Transformers</span>
                    <span class="bg-white/20 px-4 py-2 rounded-full text-sm">Python 3.10</span>
                </div>
            </div>
        </header>

        <!-- Status Banner -->
        <div id="status-banner" class="bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4">
            <div class="container mx-auto px-4">
                <p class="font-bold">‚ö†Ô∏è Servidor configur√°ndose...</p>
                <p class="text-sm">Instalando PyTorch 2.1+ (puede tardar unos minutos)</p>
            </div>
        </div>

        <!-- Main Content -->
        <main class="container mx-auto px-4 py-12">
            <!-- API Endpoints -->
            <section class="mb-12">
                <h2 class="text-3xl font-bold mb-6 text-gray-800">üì° Endpoints Disponibles</h2>
                <div class="grid md:grid-cols-2 gap-6">
                    <!-- Endpoint Card -->
                    <div class="bg-white rounded-lg shadow-lg p-6 border-l-4 border-green-500">
                        <div class="flex items-center mb-3">
                            <span class="bg-green-100 text-green-800 px-3 py-1 rounded text-sm font-bold">GET</span>
                            <span class="ml-3 text-gray-700 font-mono text-sm">/</span>
                        </div>
                        <h3 class="font-bold text-lg mb-2">Informaci√≥n de la API</h3>
                        <p class="text-gray-600 text-sm">Retorna informaci√≥n general del sistema</p>
                    </div>

                    <div class="bg-white rounded-lg shadow-lg p-6 border-l-4 border-blue-500">
                        <div class="flex items-center mb-3">
                            <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded text-sm font-bold">POST</span>
                            <span class="ml-3 text-gray-700 font-mono text-sm">/api/materials/upload</span>
                        </div>
                        <h3 class="font-bold text-lg mb-2">Subir Material</h3>
                        <p class="text-gray-600 text-sm">Procesa PDFs de 80+ p√°ginas con chunking y embeddings</p>
                    </div>

                    <div class="bg-white rounded-lg shadow-lg p-6 border-l-4 border-green-500">
                        <div class="flex items-center mb-3">
                            <span class="bg-green-100 text-green-800 px-3 py-1 rounded text-sm font-bold">GET</span>
                            <span class="ml-3 text-gray-700 font-mono text-sm">/api/materials</span>
                        </div>
                        <h3 class="font-bold text-lg mb-2">Listar Materiales</h3>
                        <p class="text-gray-600 text-sm">Obtiene todos los materiales procesados</p>
                    </div>

                    <div class="bg-white rounded-lg shadow-lg p-6 border-l-4 border-purple-500">
                        <div class="flex items-center mb-3">
                            <span class="bg-purple-100 text-purple-800 px-3 py-1 rounded text-sm font-bold">POST</span>
                            <span class="ml-3 text-gray-700 font-mono text-sm">/api/validate-answer</span>
                        </div>
                        <h3 class="font-bold text-lg mb-2">Validar Respuesta</h3>
                        <p class="text-gray-600 text-sm">Valida sem√°nticamente respuestas con IA (similaridad coseno)</p>
                    </div>

                    <div class="bg-white rounded-lg shadow-lg p-6 border-l-4 border-blue-500">
                        <div class="flex items-center mb-3">
                            <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded text-sm font-bold">POST</span>
                            <span class="ml-3 text-gray-700 font-mono text-sm">/api/questions</span>
                        </div>
                        <h3 class="font-bold text-lg mb-2">Crear Pregunta</h3>
                        <p class="text-gray-600 text-sm">Crea pregunta vinculada a un material</p>
                    </div>

                    <div class="bg-white rounded-lg shadow-lg p-6 border-l-4 border-green-500">
                        <div class="flex items-center mb-3">
                            <span class="bg-green-100 text-green-800 px-3 py-1 rounded text-sm font-bold">GET</span>
                            <span class="ml-3 text-gray-700 font-mono text-sm">/api/stats</span>
                        </div>
                        <h3 class="font-bold text-lg mb-2">Estad√≠sticas</h3>
                        <p class="text-gray-600 text-sm">M√©tricas del sistema</p>
                    </div>
                </div>
            </section>

            <!-- Features -->
            <section class="mb-12">
                <h2 class="text-3xl font-bold mb-6 text-gray-800">‚ú® Caracter√≠sticas Implementadas</h2>
                <div class="grid md:grid-cols-3 gap-6">
                    <div class="bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-6">
                        <div class="text-4xl mb-4">üìö</div>
                        <h3 class="font-bold text-lg mb-2">Procesamiento de 80+ p√°ginas</h3>
                        <p class="text-gray-700 text-sm">Maneja documentos extensos con validaci√≥n de tama√±o m√≠nimo</p>
                    </div>

                    <div class="bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-6">
                        <div class="text-4xl mb-4">‚úÇÔ∏è</div>
                        <h3 class="font-bold text-lg mb-2">Chunking Inteligente</h3>
                        <p class="text-gray-700 text-sm">Divisi√≥n con overlap, respeta l√≠mites de oraciones</p>
                    </div>

                    <div class="bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-6">
                        <div class="text-4xl mb-4">üßÆ</div>
                        <h3 class="font-bold text-lg mb-2">Embeddings Vectoriales</h3>
                        <p class="text-gray-700 text-sm">384 dimensiones con Sentence Transformers (MiniLM)</p>
                    </div>

                    <div class="bg-gradient-to-br from-orange-50 to-orange-100 rounded-lg p-6">
                        <div class="text-4xl mb-4">üóÑÔ∏è</div>
                        <h3 class="font-bold text-lg mb-2">Base de Datos Vectorial</h3>
                        <p class="text-gray-700 text-sm">Almacenamiento JSON de chunks y embeddings</p>
                    </div>

                    <div class="bg-gradient-to-br from-red-50 to-red-100 rounded-lg p-6">
                        <div class="text-4xl mb-4">ü§ñ</div>
                        <h3 class="font-bold text-lg mb-2">Validaci√≥n Sem√°ntica</h3>
                        <p class="text-gray-700 text-sm">Similaridad coseno con feedback autom√°tico</p>
                    </div>

                    <div class="bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-lg p-6">
                        <div class="text-4xl mb-4">‚ö°</div>
                        <h3 class="font-bold text-lg mb-2">API REST Moderna</h3>
                        <p class="text-gray-700 text-sm">FastAPI con documentaci√≥n autom√°tica (Swagger)</p>
                    </div>
                </div>
            </section>

            <!-- How it Works -->
            <section class="mb-12">
                <h2 class="text-3xl font-bold mb-6 text-gray-800">üîÑ Flujo de Validaci√≥n Sem√°ntica</h2>
                <div class="bg-white rounded-lg shadow-lg p-8">
                    <div class="space-y-6">
                        <div class="flex items-start">
                            <div class="bg-blue-500 text-white rounded-full w-10 h-10 flex items-center justify-center font-bold mr-4">1</div>
                            <div>
                                <h4 class="font-bold mb-1">Subir Material (PDF/TXT)</h4>
                                <p class="text-gray-600 text-sm">El sistema extrae el texto y lo divide en chunks de ~500 caracteres</p>
                            </div>
                        </div>

                        <div class="flex items-start">
                            <div class="bg-blue-500 text-white rounded-full w-10 h-10 flex items-center justify-center font-bold mr-4">2</div>
                            <div>
                                <h4 class="font-bold mb-1">Generaci√≥n de Embeddings</h4>
                                <p class="text-gray-600 text-sm">Cada chunk se convierte en un vector de 384 dimensiones</p>
                            </div>
                        </div>

                        <div class="flex items-start">
                            <div class="bg-blue-500 text-white rounded-full w-10 h-10 flex items-center justify-center font-bold mr-4">3</div>
                            <div>
                                <h4 class="font-bold mb-1">Almacenamiento Vectorial</h4>
                                <p class="text-gray-600 text-sm">Los chunks y embeddings se guardan en JSON (data/embeddings/)</p>
                            </div>
                        </div>

                        <div class="flex items-start">
                            <div class="bg-green-500 text-white rounded-full w-10 h-10 flex items-center justify-center font-bold mr-4">4</div>
                            <div>
                                <h4 class="font-bold mb-1">Estudiante Responde</h4>
                                <p class="text-gray-600 text-sm">La respuesta del usuario se convierte en embedding</p>
                            </div>
                        </div>

                        <div class="flex items-start">
                            <div class="bg-green-500 text-white rounded-full w-10 h-10 flex items-center justify-center font-bold mr-4">5</div>
                            <div>
                                <h4 class="font-bold mb-1">C√°lculo de Similaridad</h4>
                                <p class="text-gray-600 text-sm">Se compara con todos los chunks usando similaridad coseno</p>
                            </div>
                        </div>

                        <div class="flex items-start">
                            <div class="bg-purple-500 text-white rounded-full w-10 h-10 flex items-center justify-center font-bold mr-4">6</div>
                            <div>
                                <h4 class="font-bold mb-1">Feedback Autom√°tico</h4>
                                <p class="text-gray-600 text-sm">Score y mensaje basado en el nivel de similaridad</p>
                                <div class="mt-2 grid grid-cols-2 gap-2 text-xs">
                                    <div class="bg-green-100 p-2 rounded"><strong>‚â•0.9:</strong> Excelente üåü</div>
                                    <div class="bg-blue-100 p-2 rounded"><strong>0.7-0.89:</strong> Bueno üëç</div>
                                    <div class="bg-yellow-100 p-2 rounded"><strong>0.5-0.69:</strong> Aceptable üìö</div>
                                    <div class="bg-red-100 p-2 rounded"><strong>&lt;0.5:</strong> Revisar üîÑ</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Quick Links -->
            <section>
                <h2 class="text-3xl font-bold mb-6 text-gray-800">üîó Enlaces R√°pidos</h2>
                <div class="grid md:grid-cols-2 gap-4">
                    <a href="http://localhost:8000/docs" class="bg-blue-500 hover:bg-blue-600 text-white rounded-lg p-6 text-center transition">
                        <div class="text-3xl mb-2">üìñ</div>
                        <h3 class="font-bold text-lg">Documentaci√≥n Swagger</h3>
                        <p class="text-sm opacity-90">Interfaz interactiva para probar endpoints</p>
                    </a>

                    <a href="http://localhost:8000/redoc" class="bg-green-500 hover:bg-green-600 text-white rounded-lg p-6 text-center transition">
                        <div class="text-3xl mb-2">üìò</div>
                        <h3 class="font-bold text-lg">ReDoc</h3>
                        <p class="text-sm opacity-90">Documentaci√≥n API en formato legible</p>
                    </a>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="bg-gray-800 text-white py-8 mt-12">
            <div class="container mx-auto px-4 text-center">
                <p class="font-bold mb-2">Recuiva Backend API v2.0.0</p>
                <p class="text-sm opacity-75">Desarrollado por Abel Jes√∫s Moya Acosta - UPAO 2025</p>
                <p class="text-xs mt-2 opacity-50">FastAPI + Sentence Transformers + PyPDF2</p>
            </div>
        </footer>
    </div>

    <script>
        // Verificar estado del servidor
        async function checkServer() {
            try {
                const response = await fetch('http://localhost:8000/');
                if (response.ok) {
                    const banner = document.getElementById('status-banner');
                    banner.className = 'bg-green-100 border-l-4 border-green-500 text-green-700 p-4';
                    banner.innerHTML = `
                        <div class="container mx-auto px-4">
                            <p class="font-bold">‚úÖ Servidor en l√≠nea!</p>
                            <p class="text-sm">El backend est√° funcionando correctamente en http://localhost:8000</p>
                        </div>
                    `;
                }
            } catch (error) {
                console.log('Servidor a√∫n no disponible, reintentando...');
                setTimeout(checkServer, 5000);
            }
        }

        // Verificar cada 5 segundos
        setTimeout(checkServer, 2000);
    </script>
</body>
</html>
